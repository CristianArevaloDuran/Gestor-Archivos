{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/crist/Downloads/Node/gestor-de-archivos-front/context/DownloadContext.js"],"sourcesContent":["'use client';\r\nimport { useState, createContext, useContext, useRef } from \"react\";\r\n\r\nconst DownloadContext = createContext();\r\n\r\nexport function DonwloadProvider({children}) {\r\n    const [downloads, setDownloads] = useState([]);\r\n    const timeouts = useRef({});\r\n\r\n    //Function for starting a new download\r\n    const startDownload = (file, controller) => {\r\n        setDownloads(prev => [...prev,\r\n            {\r\n                id: file._id,\r\n                name: file.originalName,\r\n                progress: 0,\r\n                controller\r\n            }\r\n        ]);\r\n    };\r\n\r\n    //Function for updating progress\r\n    const updateProgress = (id, progress) => {\r\n        setDownloads(prev => \r\n            prev.map(d => d.id === id ? {...d, progress} : d)\r\n        );\r\n    };\r\n\r\n    //Function for cancelling download\r\n    const cancelDownload = (id) => {\r\n        timeouts.current[id] = setTimeout(() => {\r\n            setDownloads(prev => prev.filter(d => d.id !== id));\r\n            delete timeouts.current[id];\r\n        }, 2000);\r\n    };\r\n\r\n    //Function for deleting completed downloads\r\n    const completeDownload = (id) => {\r\n        timeouts.current[id] = setTimeout(() =>{\r\n            setDownloads(prev => prev.filter(d => d.id !== id));\r\n            delete timeouts.current[id];\r\n        },5000);\r\n    };\r\n\r\n    return (\r\n        <DownloadContext.Provider value={{downloads, startDownload, updateProgress, cancelDownload, completeDownload}}>\r\n            {children}\r\n        </DownloadContext.Provider>\r\n    );\r\n}\r\n\r\nexport const useDownload = () => useContext(DownloadContext);"],"names":[],"mappings":";;;;;AACA;;;AADA;;AAGA,MAAM,gCAAkB,CAAA,GAAA,6JAAA,CAAA,gBAAa,AAAD;AAE7B,SAAS,iBAAiB,EAAC,QAAQ,EAAC;;IACvC,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE,EAAE;IAC7C,MAAM,WAAW,CAAA,GAAA,6JAAA,CAAA,SAAM,AAAD,EAAE,CAAC;IAEzB,sCAAsC;IACtC,MAAM,gBAAgB,CAAC,MAAM;QACzB,aAAa,CAAA,OAAQ;mBAAI;gBACrB;oBACI,IAAI,KAAK,GAAG;oBACZ,MAAM,KAAK,YAAY;oBACvB,UAAU;oBACV;gBACJ;aACH;IACL;IAEA,gCAAgC;IAChC,MAAM,iBAAiB,CAAC,IAAI;QACxB,aAAa,CAAA,OACT,KAAK,GAAG,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,KAAK;oBAAC,GAAG,CAAC;oBAAE;gBAAQ,IAAI;IAEvD;IAEA,kCAAkC;IAClC,MAAM,iBAAiB,CAAC;QACpB,SAAS,OAAO,CAAC,GAAG,GAAG,WAAW;YAC9B,aAAa,CAAA,OAAQ,KAAK,MAAM,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;YAC/C,OAAO,SAAS,OAAO,CAAC,GAAG;QAC/B,GAAG;IACP;IAEA,2CAA2C;IAC3C,MAAM,mBAAmB,CAAC;QACtB,SAAS,OAAO,CAAC,GAAG,GAAG,WAAW;YAC9B,aAAa,CAAA,OAAQ,KAAK,MAAM,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;YAC/C,OAAO,SAAS,OAAO,CAAC,GAAG;QAC/B,GAAE;IACN;IAEA,qBACI,6LAAC,gBAAgB,QAAQ;QAAC,OAAO;YAAC;YAAW;YAAe;YAAgB;YAAgB;QAAgB;kBACvG;;;;;;AAGb;GA5CgB;KAAA;AA8CT,MAAM,cAAc;;IAAM,OAAA,CAAA,GAAA,6JAAA,CAAA,aAAU,AAAD,EAAE;AAAe;IAA9C","debugId":null}}]
}